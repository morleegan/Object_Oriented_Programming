from thalia.section import Sections


class Singleton(type):
    _instances = {}

    def __call__(cls, *args, **kwargs):
        if cls not in cls._instances:
            cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs)
        return cls._instances[cls]


class Theater(metaclass=Singleton):
    """Theater/Seating section."""

    def __init__(self, *args, **kwargs):
        self.sections = list()
        self.theater = dict()

        for opt in ['theater']:
            if opt in kwargs.keys():
                setattr(self, opt, kwargs[opt])

        self.create_theater(self.theater)

    def create_theater(self, theater):
        """theater is a list of"""
        for section in theater:
            new_seating = Sections(name=section['section_name'], row=section['seating'])
            self.sections.append(new_seating)

